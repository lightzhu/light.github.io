(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{522:function(s,t,n){"use strict";n.r(t);var a=n(6),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"一键部署前端项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一键部署前端项目"}},[s._v("#")]),s._v(" 一键部署前端项目")]),s._v(" "),n("ul",[n("li",[s._v("1.ssh-keygen -t rsa -C admindeploy -f 在本地生成一个密钥文件")]),s._v(" "),n("li",[s._v("2.cd .ssh 文件夹，将 生成的 deploy 文件 copy 到当前文件夹 cp ~/deploy .")]),s._v(" "),n("li",[s._v("3.将 deploy.pub 文件 copy 到服务器 scp deploy.pub root@your serverip")]),s._v(" "),n("li",[s._v("4.将 deploy.pub 的内容 copy 到服务器.ssh 文件夹下的 authorized_keys 文件中 cat deploy.pub >> ~/.ssh/authorized_keys")]),s._v(" "),n("li",[s._v("5.将公钥 deploy.pub 配置到 github 项目的 secret 里面")]),s._v(" "),n("li",[s._v("6.配置项目的 action，使用 ssh-deploy 插件，配置好信息然后 start-commit")])]),s._v(" "),n("h2",{attrs:{id:"action-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#action-配置"}},[s._v("#")]),s._v(" action 配置")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("name: Node.js CI\non: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("push"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\njobs:\n  build:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        node-version: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(".x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    steps:\n    - uses: actions/checkout@v2\n    - name: Use Node.js "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${{ matrix.node-version }")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      uses: actions/setup-node@v1\n      with:\n        node-version: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.x"')]),s._v("\n    - run: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n    - run: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build --if-present\n      env:\n        CI: "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    - name: Deploy\n      uses: easingthemes/ssh-deploy@v2.0.7\n      env:\n        SSH_PRIVATE_KEY: "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${{secrets.ALIYUN}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        ARGS: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-avz --delete"')]),s._v("\n        REMOTE_HOST: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${你的服务器IP地址}")]),s._v('"')]),s._v("\n        REMOTE_USER: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v("\n        SOURCE: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/"')]),s._v("\n        TARGET: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/nginx/admin"')]),s._v(" // 项目发布到的目录\n\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);