(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{514:function(e,s,r){"use strict";r.r(s);var t=r(6),a=Object(t.a)({},(function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h2",{attrs:{id:"一-问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#一-问题"}},[e._v("#")]),e._v(" 一. 问题")]),e._v(" "),r("p",[e._v("前后端分离，服务端和前端的项目分别在不同的域名下，服务端设置 Set-Cookie 浏览器的 cookie 显示不出来，设置不成功。")]),e._v(" "),r("h2",{attrs:{id:"二-首选是-express-服务器-header-设置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二-首选是-express-服务器-header-设置"}},[e._v("#")]),e._v(" 二.首选是 express 服务器 header 设置")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("  res.header('Access-Control-Allow-Origin', allowOrigin)\n  res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, X-Requested-With')\n  res.header('Access-Control-Expose-Headers', 'Set-Cookie')\n  res.header('Access-Control-Allow-Methods', 'PUT,POST,GET,DELETE,OPTIONS')\n  res.header('Access-Control-Allow-Credentials', true) //可以带cookies\n")])])]),r("h2",{attrs:{id:"三-session-cookie-设置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#三-session-cookie-设置"}},[e._v("#")]),e._v(" 三.session-cookie 设置")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("session: {\n    saveUninitialized: true,\n    cookie: {\n      httpOnly: false,\n      secure: true,\n      sameSite: 'none',\n      maxAge: 6 * 60 * 60 * 1000\n    }\n  }\n")])])]),r("h2",{attrs:{id:"四-nginx-代理服务设置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#四-nginx-代理服务设置"}},[e._v("#")]),e._v(" 四.nginx 代理服务设置")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("location / {\n  proxy_pass http://127.0.0.1:9090/;\n  #proxy_cookie_path / /;\n  proxy_set_header Host $host:$server_port;\n  proxy_set_header Remote_Addr $remote_addr;\n  proxy_set_header X-Real-IP $remote_addr;\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n  proxy_set_header X-Scheme $scheme;\n  proxy_set_header X-Forwarded-Scheme $scheme;\n   proxy_set_header X-Forwarded-Proto $scheme;\n  proxy_set_header Cookie $http_cookie;\n}\n\n")])])])])}),[],!1,null,null,null);s.default=a.exports}}]);